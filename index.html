<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snake Game - 12 Niveles</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            transition: background 0.5s ease;
        }

        body.level-1 { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        body.level-2 { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
        body.level-3 { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
        body.level-4 { background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); }
        body.level-5 { background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); }
        body.level-6 { background: linear-gradient(135deg, #30cfd0 0%, #330867 100%); }
        body.level-7 { background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); }
        body.level-8 { background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%); }
        body.level-9 { background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%); }
        body.level-10 { background: linear-gradient(135deg, #ff6e7f 0%, #bfe9ff 100%); }
        body.level-11 { background: linear-gradient(135deg, #e0c3fc 0%, #8ec5fc 100%); }
        body.level-12 { background: linear-gradient(135deg, #f77062 0%, #fe5196 100%); }

        .container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        h1 {
            color: white;
            text-align: center;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .grid-container {
            display: inline-block;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(52, 12px);
            grid-gap: 3px;
        }

        .cell {
            width: 12px;
            height: 12px;
            border-radius: 2px;
            background: rgba(45, 27, 105, 0.3);
            transition: all 0.3s ease;
        }

        .cell.snake {
            background: linear-gradient(135deg, #feca57 0%, #ff9ff3 100%) !important;
            box-shadow: 0 0 10px rgba(254, 202, 87, 0.8);
            transform: scale(1.2);
            border-radius: 50%;
        }

        .cell.food {
            background: linear-gradient(135deg, #ff6b6b 0%, #4ecdc4 100%) !important;
            box-shadow: 0 0 15px rgba(255, 107, 107, 0.9);
            transform: scale(1.3);
            border-radius: 50%;
            animation: pulse 0.8s infinite;
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1.3);
                opacity: 1;
            }
            50% {
                transform: scale(1.5);
                opacity: 0.8;
            }
        }

        .controls {
            text-align: center;
            margin-top: 20px;
        }

        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            margin: 0 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        .info {
            color: white;
            text-align: center;
            margin-top: 20px;
            font-size: 16px;
            opacity: 0.9;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }

        .stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 15px;
        }

        .stat-item {
            background: rgba(255, 255, 255, 0.2);
            padding: 10px 20px;
            border-radius: 15px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéÆ Snake Game - Nivel <span id="level-display">1</span>/12</h1>
        <div class="grid-container">
            <div class="grid" id="grid"></div>
        </div>
        <div class="controls">
            <button onclick="startGame()">‚ñ∂Ô∏è Jugar</button>
            <button onclick="pauseGame()">‚è∏Ô∏è Pausar</button>
            <button onclick="resetGame()">üîÑ Reiniciar</button>
        </div>
        <div class="info">
            üéÆ Usa las flechas del teclado: ‚¨ÜÔ∏è ‚¨áÔ∏è ‚¨ÖÔ∏è ‚û°Ô∏è
            <div class="stats">
                <div class="stat-item">üìä Puntos: <span id="score">0</span></div>
                <div class="stat-item">üêç Longitud: <span id="length">4</span></div>
                <div class="stat-item">üçé Comidas: <span id="eaten">0</span></div>
            </div>
        </div>
    </div>

    <script>
        const ROWS = 7;
        const COLS = 52;
        const MAX_LEVEL = 12;
        const FOODS_PER_LEVEL = 10; // Comidas necesarias para pasar de nivel
        
        let grid = [];
        let snake = [];
        let food = null;
        let isPlaying = false;
        let gameInterval;
        let currentDirection = 'right';
        let nextDirection = 'right';
        let score = 0;
        let eatenCount = 0;
        let currentLevel = 1;
        let foodsEatenInLevel = 0;
        let gameSpeed = 150; // Velocidad inicial en ms

        // Velocidades por nivel (disminuye = m√°s r√°pido)
        const LEVEL_SPEEDS = {
            1: 150,
            2: 135,
            3: 120,
            4: 105,
            5: 90,
            6: 80,
            7: 70,
            8: 60,
            9: 50,
            10: 45,
            11: 40,
            12: 35
        };

        // Inicializar grid
        function initGrid() {
            const gridElement = document.getElementById('grid');
            gridElement.innerHTML = '';
            grid = [];

            for (let i = 0; i < ROWS; i++) {
                grid[i] = [];
                for (let j = 0; j < COLS; j++) {
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    gridElement.appendChild(cell);
                    grid[i][j] = {
                        element: cell,
                        hasSnake: false,
                        hasFood: false
                    };
                }
            }
        }

        // Inicializar serpiente
        function initSnake() {
            snake = [
                { row: 3, col: 0 },
                { row: 3, col: 1 },
                { row: 3, col: 2 },
                { row: 3, col: 3 }
            ];
            currentDirection = 'right';
            nextDirection = 'right';
            
            snake.forEach(pos => {
                grid[pos.row][pos.col].hasSnake = true;
                grid[pos.row][pos.col].element.classList.add('snake');
            });
        }

        // Generar comida en posici√≥n aleatoria
        function spawnFood() {
            // Limpiar comida anterior si existe
            if (food) {
                grid[food.row][food.col].hasFood = false;
                grid[food.row][food.col].element.classList.remove('food');
            }

            // Encontrar posiciones vac√≠as
            let emptyPositions = [];
            for (let i = 0; i < ROWS; i++) {
                for (let j = 0; j < COLS; j++) {
                    if (!grid[i][j].hasSnake) {
                        emptyPositions.push({ row: i, col: j });
                    }
                }
            }

            if (emptyPositions.length === 0) {
                gameOver('¬°Ganaste! Completaste el juego üèÜ', true);
                return;
            }

            // Seleccionar posici√≥n aleatoria
            const randomIndex = Math.floor(Math.random() * emptyPositions.length);
            food = emptyPositions[randomIndex];
            
            grid[food.row][food.col].hasFood = true;
            grid[food.row][food.col].element.classList.add('food');
        }

        // Actualizar estad√≠sticas
        function updateStats() {
            document.getElementById('score').textContent = score;
            document.getElementById('eaten').textContent = eatenCount;
            document.getElementById('length').textContent = snake.length;
            document.getElementById('level-display').textContent = currentLevel;
        }

        // Cambiar nivel
        function levelUp() {
            if (currentLevel >= MAX_LEVEL) {
                gameOver('¬°Completaste todos los 12 niveles! üéâüèÜ', true);
                return;
            }

            currentLevel++;
            foodsEatenInLevel = 0;
            gameSpeed = LEVEL_SPEEDS[currentLevel];
            
            // Cambiar color de fondo
            document.body.className = `level-${currentLevel}`;
            
            // Mostrar mensaje de nivel
            pauseGame();
            setTimeout(() => {
                alert(`üéä ¬°NIVEL ${currentLevel}! üéä\n\n‚ö° La serpiente es m√°s r√°pida\nüéØ Come ${FOODS_PER_LEVEL} alimentos para avanzar\n\n¬°Presiona OK para continuar!`);
                startGame();
            }, 300);
        }

        // Controles del teclado
        document.addEventListener('keydown', (e) => {
            if (!isPlaying) return;
            
            switch(e.key) {
                case 'ArrowUp':
                    if (currentDirection !== 'down') {
                        nextDirection = 'up';
                    }
                    e.preventDefault();
                    break;
                case 'ArrowDown':
                    if (currentDirection !== 'up') {
                        nextDirection = 'down';
                    }
                    e.preventDefault();
                    break;
                case 'ArrowLeft':
                    if (currentDirection !== 'right') {
                        nextDirection = 'left';
                    }
                    e.preventDefault();
                    break;
                case 'ArrowRight':
                    if (currentDirection !== 'left') {
                        nextDirection = 'right';
                    }
                    e.preventDefault();
                    break;
            }
        });

        // Obtener siguiente posici√≥n
        function getNextPosition(current, direction) {
            let next = { ...current };
            
            switch (direction) {
                case 'right':
                    next.col++;
                    break;
                case 'down':
                    next.row++;
                    break;
                case 'left':
                    next.col--;
                    break;
                case 'up':
                    next.row--;
                    break;
            }
            
            return next;
        }

        // Verificar colisi√≥n con bordes
        function isOutOfBounds(pos) {
            return pos.row < 0 || pos.row >= ROWS || pos.col < 0 || pos.col >= COLS;
        }

        // Verificar colisi√≥n consigo misma
        function collidesWithSelf(pos) {
            return snake.some((segment, index) => 
                index < snake.length - 1 && segment.row === pos.row && segment.col === pos.col
            );
        }

        // Mover serpiente
        function moveSnake() {
            const head = snake[snake.length - 1];
            
            // Actualizar direcci√≥n
            currentDirection = nextDirection;
            
            const next = getNextPosition(head, currentDirection);
            
            // Verificar colisiones
            if (isOutOfBounds(next)) {
                gameOver('¬°Chocaste con el borde! üí•');
                return;
            }
            
            if (collidesWithSelf(next)) {
                gameOver('¬°Te mordiste la cola! üêç');
                return;
            }
            
            // A√±adir nueva cabeza
            snake.push(next);
            grid[next.row][next.col].hasSnake = true;
            grid[next.row][next.col].element.classList.add('snake');
            
            // Verificar si comi√≥ la comida
            let ateFood = false;
            if (food && next.row === food.row && next.col === food.col) {
                ateFood = true;
                score += currentLevel * 10; // M√°s puntos en niveles superiores
                eatenCount++;
                foodsEatenInLevel++;
                
                // Limpiar comida
                grid[food.row][food.col].hasFood = false;
                grid[food.row][food.col].element.classList.remove('food');
                
                // Generar nueva comida
                spawnFood();
                
                // Verificar si debe subir de nivel
                if (foodsEatenInLevel >= FOODS_PER_LEVEL) {
                    levelUp();
                }
                
                updateStats();
            }
            
            // Si no comi√≥, eliminar la cola (la serpiente crece al comer)
            if (!ateFood) {
                const tail = snake.shift();
                grid[tail.row][tail.col].hasSnake = false;
                grid[tail.row][tail.col].element.classList.remove('snake');
            } else {
                updateStats();
            }
        }

        // Game Over
        function gameOver(message, isWin = false) {
            pauseGame();
            setTimeout(() => {
                const emoji = isWin ? 'üèÜ' : 'üòµ';
                const levelMsg = isWin ? `\nüéñÔ∏è Nivel alcanzado: ${currentLevel}/${MAX_LEVEL}` : `\nüìä Llegaste al nivel: ${currentLevel}/${MAX_LEVEL}`;
                alert(`${emoji} ${message}${levelMsg}\n\nüéØ Puntos totales: ${score}\nüêç Longitud final: ${snake.length}\nüçé Comidas totales: ${eatenCount}`);
            }, 300);
        }

        // Controles del juego
        function startGame() {
            if (!isPlaying) {
                isPlaying = true;
                gameInterval = setInterval(moveSnake, gameSpeed);
            }
        }

        function pauseGame() {
            isPlaying = false;
            if (gameInterval) {
                clearInterval(gameInterval);
                gameInterval = null;
            }
        }

        function resetGame() {
            pauseGame();
            currentLevel = 1;
            score = 0;
            eatenCount = 0;
            foodsEatenInLevel = 0;
            gameSpeed = LEVEL_SPEEDS[1];
            document.body.className = 'level-1';
            initGrid();
            initSnake();
            spawnFood();
            updateStats();
        }

        // Inicializar al cargar
        window.onload = function() {
            document.body.className = 'level-1';
            initGrid();
            initSnake();
            spawnFood();
            updateStats();
            
            alert('üéÆ ¬°SNAKE GAME - 12 NIVELES!\n\n‚¨ÜÔ∏è‚¨áÔ∏è‚¨ÖÔ∏è‚û°Ô∏è Usa las flechas para moverte\nüçé Come la comida para crecer\nüìà Come 10 alimentos por nivel\n‚ö° Cada nivel es m√°s r√°pido\nüé® Los colores cambian en cada nivel\n\n¬°Presiona JUGAR para comenzar!');
        };
    </script>
</body>
</html>